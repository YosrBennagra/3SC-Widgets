<local:WidgetWindowBase
    x:Class="_3SC.Widgets.Clock.ClockWidgetWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:_3SC.Widgets.Clock"
    xmlns:view="clr-namespace:_3SC.Widgets.Clock"
    mc:Ignorable="d"
    Title="ClockWidget"
    Width="300"
    Height="140"
    WindowStyle="None"
    AllowsTransparency="True"
    Background="Transparent"
    ShowInTaskbar="False"
    ResizeMode="NoResize"
    Topmost="False">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- Window Resources - 3SC Dark Theme                                        -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <local:WidgetWindowBase.Resources>
        <!-- Background Colors -->
        <SolidColorBrush x:Key="WidgetBackground"
                         Color="#FF0A0A0F"/>
        <SolidColorBrush x:Key="WidgetSurface"
                         Color="#D0080810"/>
        <SolidColorBrush x:Key="SurfaceElevated"
                         Color="#FF16161F"/>
        <SolidColorBrush x:Key="SurfaceHover"
                         Color="#FF1C1C28"/>

        <!-- Text Colors -->
        <SolidColorBrush x:Key="TextPrimary"
                         Color="#FFF1F5F9"/>
        <SolidColorBrush x:Key="TextSecondary"
                         Color="#FF94A3B8"/>
        <SolidColorBrush x:Key="TextTertiary"
                         Color="#FF64748B"/>

        <!-- Accent Colors -->
        <SolidColorBrush x:Key="Accent"
                         Color="#FF2DD4BF"/>
        <SolidColorBrush x:Key="AccentHover"
                         Color="#FF5EEAD4"/>
        <SolidColorBrush x:Key="AccentPressed"
                         Color="#FF14B8A6"/>

        <!-- Border Colors -->
        <SolidColorBrush x:Key="Border"
                         Color="#FF2A2A3A"/>
        <SolidColorBrush x:Key="BorderHover"
                         Color="#FF3A3A4A"/>
        <SolidColorBrush x:Key="BorderSubtle"
                         Color="#20FFFFFF"/>

        <!-- Animations -->
        <Storyboard x:Key="FadeIn">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="0"
                             To="1"
                             Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- Context Menu Style -->
        <Style x:Key="WidgetContextMenuStyle"
                TargetType="ContextMenu">
            <Setter Property="Background"
                    Value="{StaticResource SurfaceElevated}"/>
            <Setter Property="BorderBrush"
                    Value="{StaticResource Border}"/>
            <Setter Property="BorderThickness"
                    Value="1"/>
            <Setter Property="Foreground"
                    Value="{StaticResource TextPrimary}"/>
            <Setter Property="Padding"
                    Value="4"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ContextMenu">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <Border.Effect>
                                <DropShadowEffect Color="Black"
                                                  BlurRadius="16"
                                                  ShadowDepth="4"
                                                  Opacity="0.4"/>
                            </Border.Effect>
                            <StackPanel IsItemsHost="True"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemContainerStyle"
                    Value="{DynamicResource WidgetMenuItemStyle}"/>
        </Style>

        <!-- MenuItem Style -->
        <Style x:Key="WidgetMenuItemStyle"
                TargetType="MenuItem">
            <Setter Property="Background"
                    Value="Transparent"/>
            <Setter Property="Foreground"
                    Value="{StaticResource TextPrimary}"/>
            <Setter Property="Padding"
                    Value="12,8"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="MenuItem">
                        <Border x:Name="Border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <ContentPresenter Grid.Column="0"
                                                  ContentSource="Icon"
                                                  Width="16"
                                                  Height="16"
                                                  Margin="0,0,8,0"
                                                  VerticalAlignment="Center"/>
                                <ContentPresenter Grid.Column="1"
                                                  ContentSource="Header"
                                                  VerticalAlignment="Center"
                                                  TextBlock.Foreground="{StaticResource TextPrimary}"/>
                                <TextBlock Grid.Column="2"
                                           x:Name="Checkmark"
                                           Text="âœ“"
                                           Foreground="{StaticResource Accent}"
                                           Visibility="Collapsed"
                                           VerticalAlignment="Center"
                                           Margin="8,0,0,0"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver"
                                     Value="True">
                                <Setter TargetName="Border"
                                        Property="Background"
                                        Value="{StaticResource SurfaceHover}"/>
                            </Trigger>
                            <Trigger Property="IsChecked"
                                     Value="True">
                                <Setter TargetName="Checkmark"
                                        Property="Visibility"
                                        Value="Visible"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Separator Style -->
        <Style x:Key="WidgetSeparatorStyle"
                TargetType="Separator">
            <Setter Property="Height"
                    Value="1"/>
            <Setter Property="Margin"
                    Value="8,4"/>
            <Setter Property="Background"
                    Value="{StaticResource Border}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Separator">
                        <Border Background="{TemplateBinding Background}"
                                Height="{TemplateBinding Height}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </local:WidgetWindowBase.Resources>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- Root container (widget shell)                                            -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <Grid Margin="6">

        <Border x:Name="RootBorder"
                CornerRadius="12"
                SnapsToDevicePixels="True"
                Background="{StaticResource WidgetSurface}"
                Cursor="Hand"
                PreviewMouseLeftButtonDown="RootBorder_PreviewMouseLeftButtonDown"
                PreviewMouseLeftButtonUp="RootBorder_PreviewMouseLeftButtonUp"
                PreviewMouseMove="RootBorder_PreviewMouseMove"
                MouseRightButtonUp="RootBorder_MouseRightButtonUp">

            <!-- Fade-in animation on load -->
            <Border.Style>
                <Style TargetType="Border">
                    <Style.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard Storyboard="{StaticResource FadeIn}"/>
                        </EventTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- Context Menu                                                     -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Border.ContextMenu>
                <ContextMenu Style="{StaticResource WidgetContextMenuStyle}">
                    <MenuItem Header="Settings..."
                              Style="{StaticResource WidgetMenuItemStyle}"
                              Click="Settings_Click">
                        <MenuItem.Icon>
                            <TextBlock Text="âš™"
                                       FontSize="14"
                                       Foreground="{StaticResource TextSecondary}"/>
                        </MenuItem.Icon>
                    </MenuItem>

                    <Separator Style="{StaticResource WidgetSeparatorStyle}"/>

                    <MenuItem x:Name="LockWidgetMenuItem"
                              Header="Lock Widget"
                              Style="{StaticResource WidgetMenuItemStyle}"
                              IsCheckable="True"
                              Click="LockWidget_Click">
                        <MenuItem.Icon>
                            <TextBlock Text="ðŸ”’"
                                       FontSize="12"
                                       Foreground="{StaticResource TextSecondary}"/>
                        </MenuItem.Icon>
                    </MenuItem>

                    <MenuItem x:Name="ResizeToggleMenuItem"
                              Header="Resize Handles"
                              Style="{StaticResource WidgetMenuItemStyle}"
                              IsCheckable="True"
                              Click="ResizeToggle_Click">
                        <MenuItem.Icon>
                            <TextBlock Text="â¤¡"
                                       FontSize="14"
                                       Foreground="{StaticResource TextSecondary}"/>
                        </MenuItem.Icon>
                    </MenuItem>

                    <Separator Style="{StaticResource WidgetSeparatorStyle}"/>

                    <MenuItem Header="Remove Widget"
                              Style="{StaticResource WidgetMenuItemStyle}"
                              Click="RemoveWidget_Click">
                        <MenuItem.Icon>
                            <TextBlock Text="âœ•"
                                       FontSize="12"
                                       Foreground="#FFEF4444"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </ContextMenu>
            </Border.ContextMenu>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- Content + Resize System                                          -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Grid>
                <!-- Resize outline (shown when resize mode active) -->
                <Rectangle x:Name="ResizeOutline"
                           Stroke="{StaticResource Accent}"
                           StrokeThickness="1"
                           RadiusX="12"
                           RadiusY="12"
                           Visibility="Collapsed"/>

                <!-- Resize handles - positioned at edge with negative margins -->
                <Thumb x:Name="ResizeTop"
                       Width="12"
                       Height="12"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Top"
                       Margin="0,-6,0,0"
                       Cursor="SizeNS"
                       DragDelta="ResizeTop_DragDelta"
                       Visibility="Collapsed"
                       Panel.ZIndex="10">
                    <Thumb.Template>
                        <ControlTemplate TargetType="Thumb">
                            <Border Background="{StaticResource Accent}"
                                    CornerRadius="6"/>
                        </ControlTemplate>
                    </Thumb.Template>
                </Thumb>

                <Thumb x:Name="ResizeBottom"
                       Width="12"
                       Height="12"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Bottom"
                       Margin="0,0,0,-6"
                       Cursor="SizeNS"
                       DragDelta="ResizeBottom_DragDelta"
                       Visibility="Collapsed"
                       Panel.ZIndex="10">
                    <Thumb.Template>
                        <ControlTemplate TargetType="Thumb">
                            <Border Background="{StaticResource Accent}"
                                    CornerRadius="6"/>
                        </ControlTemplate>
                    </Thumb.Template>
                </Thumb>

                <Thumb x:Name="ResizeLeft"
                       Width="12"
                       Height="12"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Center"
                       Margin="-6,0,0,0"
                       Cursor="SizeWE"
                       DragDelta="ResizeLeft_DragDelta"
                       Visibility="Collapsed"
                       Panel.ZIndex="10">
                    <Thumb.Template>
                        <ControlTemplate TargetType="Thumb">
                            <Border Background="{StaticResource Accent}"
                                    CornerRadius="6"/>
                        </ControlTemplate>
                    </Thumb.Template>
                </Thumb>

                <Thumb x:Name="ResizeRight"
                       Width="12"
                       Height="12"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       Margin="0,0,-6,0"
                       Cursor="SizeWE"
                       DragDelta="ResizeRight_DragDelta"
                       Visibility="Collapsed"
                       Panel.ZIndex="10">
                    <Thumb.Template>
                        <ControlTemplate TargetType="Thumb">
                            <Border Background="{StaticResource Accent}"
                                    CornerRadius="6"/>
                        </ControlTemplate>
                    </Thumb.Template>
                </Thumb>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <!-- Widget Content (Clock UI)                                    -->
                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <view:ClockWidgetView x:Name="ClockView"
                                      Margin="12"/>

            </Grid>
        </Border>
    </Grid>
</local:WidgetWindowBase>
