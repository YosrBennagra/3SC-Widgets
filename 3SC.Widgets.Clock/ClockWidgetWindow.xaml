<Window x:Class="_3SC.Widgets.Clock.ClockWidgetWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Clock Widget (External)"
        Width="300"
        Height="80"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ShowInTaskbar="False"
        Topmost="False"
        ResizeMode="NoResize">

    <Window.Resources>
        <!-- Dark Theme Colors (matching 3SC Dark.xaml) -->
        <SolidColorBrush x:Key="WidgetSurface" Color="#D0080810"/>
        <SolidColorBrush x:Key="WidgetText" Color="#FFF1F5F9"/>
        <SolidColorBrush x:Key="Accent" Color="#FF2DD4BF"/>
    </Window.Resources>

    <Grid Margin="6">
        <!-- Outer container with rounded corners and semi-transparent backdrop -->
        <Border x:Name="RootBorder"
                CornerRadius="12"
                Padding="0"
                SnapsToDevicePixels="True"
                Background="{StaticResource WidgetSurface}"
                Cursor="Hand"
                PreviewMouseLeftButtonDown="RootBorder_PreviewMouseLeftButtonDown"
                PreviewMouseLeftButtonUp="RootBorder_PreviewMouseLeftButtonUp"
                PreviewMouseMove="RootBorder_PreviewMouseMove"
                MouseRightButtonUp="RootBorder_MouseRightButtonUp">
            <Border.ContextMenu>
                <ContextMenu Background="#FF101018" 
                             BorderBrush="#FF2A2A3A"
                             Foreground="#FFF1F5F9">
                    <MenuItem Header="Settings..."
                              Click="Settings_Click"
                              Foreground="#FFF1F5F9">
                        <MenuItem.Icon>
                            <TextBlock Text="&#xE713;"
                                       FontFamily="Segoe MDL2 Assets"
                                       FontSize="14"
                                       Foreground="#FF2DD4BF"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator Background="#FF2A2A3A"/>
                    <MenuItem Header="Close Widget"
                              Click="CloseWidget_Click"
                              Foreground="#FFF1F5F9">
                        <MenuItem.Icon>
                            <TextBlock Text="&#xE711;"
                                       FontFamily="Segoe MDL2 Assets"
                                       FontSize="14"
                                       Foreground="#FFFB7185"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </ContextMenu>
            </Border.ContextMenu>

            <Grid Margin="12"
                  RenderTransformOrigin="0.5,0.5">
                <Grid.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform/>
                        <SkewTransform/>
                        <RotateTransform Angle="0.002"/>
                        <TranslateTransform/>
                    </TransformGroup>
                </Grid.RenderTransform>

                <StackPanel HorizontalAlignment="Center"
                            VerticalAlignment="Center">
                    <!-- TextBlock showing time -->
                    <TextBlock x:Name="TimeTextBlock"
                               FontFamily="Segoe UI"
                               FontSize="28"
                               FontWeight="Normal"
                               Foreground="{StaticResource WidgetText}"
                               HorizontalAlignment="Center"
                               TextOptions.TextFormattingMode="Ideal"
                               TextOptions.TextRenderingMode="ClearType"
                               SnapsToDevicePixels="True"
                               RenderTransformOrigin="0.5,0.5">
                        <TextBlock.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform/>
                                <SkewTransform/>
                                <RotateTransform Angle="-0.036"/>
                                <TranslateTransform/>
                            </TransformGroup>
                        </TextBlock.RenderTransform>
                    </TextBlock>

                    <!-- Timezone label -->
                    <TextBlock x:Name="TimeZoneLabel"
                               FontFamily="Segoe UI"
                               FontSize="11"
                               HorizontalAlignment="Center"
                               Foreground="{StaticResource Accent}"
                               FontWeight="SemiBold"
                               Margin="0,4,0,0"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
