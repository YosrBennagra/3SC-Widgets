<Window x:Class="_3SC.Widgets.Clock.ClockSettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Clock Widget Settings"
        Width="420"
        Height="520"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#FF0A0A0F"
        WindowStyle="None"
        AllowsTransparency="True">

    <Window.Resources>
        <!-- ═══════════════════════════════════════════════════════════════════ -->
        <!-- 3SC Dark Theme Colors                                                -->
        <!-- ═══════════════════════════════════════════════════════════════════ -->

        <!-- Background Colors -->
        <SolidColorBrush x:Key="WidgetBackground"
                Color="#FF0A0A0F"/>
        <SolidColorBrush x:Key="Surface"
                Color="#FF101018"/>
        <SolidColorBrush x:Key="SurfaceElevated"
                Color="#FF16161F"/>
        <SolidColorBrush x:Key="SurfaceHover"
                Color="#FF1C1C28"/>

        <!-- Text Colors -->
        <SolidColorBrush x:Key="TextPrimary"
                Color="#FFF1F5F9"/>
        <SolidColorBrush x:Key="TextSecondary"
                Color="#FF94A3B8"/>
        <SolidColorBrush x:Key="TextTertiary"
                Color="#FF64748B"/>

        <!-- Accent Colors -->
        <SolidColorBrush x:Key="Accent"
                Color="#FF2DD4BF"/>
        <SolidColorBrush x:Key="AccentHover"
                Color="#FF5EEAD4"/>
        <SolidColorBrush x:Key="AccentGlow"
                Color="#402DD4BF"/>

        <!-- Border Colors -->
        <SolidColorBrush x:Key="Border"
                Color="#FF2A2A3A"/>
        <SolidColorBrush x:Key="BorderHover"
                Color="#FF3A3A4A"/>

        <!-- Converters -->
        <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>

        <!-- ═══════════════════════════════════════════════════════════════════ -->
        <!-- Control Styles                                                       -->
        <!-- ═══════════════════════════════════════════════════════════════════ -->

        <!-- Button Style -->
        <Style x:Key="WidgetButton"
                TargetType="Button">
            <Setter Property="Background"
                    Value="{StaticResource SurfaceElevated}"/>
            <Setter Property="Foreground"
                    Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush"
                    Value="{StaticResource Border}"/>
            <Setter Property="BorderThickness"
                    Value="1"/>
            <Setter Property="Padding"
                    Value="16,8"/>
            <Setter Property="Cursor"
                    Value="Hand"/>
            <Setter Property="FontSize"
                    Value="13"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver"
                                    Value="True">
                                <Setter TargetName="border"
                                        Property="Background"
                                        Value="{StaticResource SurfaceHover}"/>
                                <Setter TargetName="border"
                                        Property="BorderBrush"
                                        Value="{StaticResource BorderHover}"/>
                            </Trigger>
                            <Trigger Property="IsPressed"
                                    Value="True">
                                <Setter TargetName="border"
                                        Property="Background"
                                        Value="{StaticResource Accent}"/>
                                <Setter TargetName="border"
                                        Property="BorderBrush"
                                        Value="{StaticResource Accent}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Primary Button Style -->
        <Style x:Key="PrimaryButton"
                TargetType="Button">
            <Setter Property="Background"
                    Value="{StaticResource Accent}"/>
            <Setter Property="Foreground"
                    Value="#FF0F172A"/>
            <Setter Property="BorderThickness"
                    Value="0"/>
            <Setter Property="Padding"
                    Value="16,8"/>
            <Setter Property="Cursor"
                    Value="Hand"/>
            <Setter Property="FontSize"
                    Value="13"/>
            <Setter Property="FontWeight"
                    Value="SemiBold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderThickness="0"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver"
                                    Value="True">
                                <Setter TargetName="border"
                                        Property="Background"
                                        Value="{StaticResource AccentHover}"/>
                            </Trigger>
                            <Trigger Property="IsPressed"
                                    Value="True">
                                <Setter TargetName="border"
                                        Property="Background"
                                        Value="#FF14B8A6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- CheckBox Style -->
        <Style x:Key="WidgetCheckBox"
                TargetType="CheckBox">
            <Setter Property="Foreground"
                    Value="{StaticResource TextPrimary}"/>
            <Setter Property="FontSize"
                    Value="13"/>
            <Setter Property="Cursor"
                    Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <StackPanel Orientation="Horizontal">
                            <Border x:Name="checkBorder"
                                    Width="18"
                                    Height="18"
                                    Background="{StaticResource SurfaceElevated}"
                                    BorderBrush="{StaticResource Border}"
                                    BorderThickness="1"
                                    CornerRadius="4"
                                    Margin="0,0,10,0">
                                <TextBlock x:Name="checkMark"
                                           Text="✓"
                                           FontSize="12"
                                           FontWeight="Bold"
                                           Foreground="{StaticResource Accent}"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Visibility="Collapsed"/>
                            </Border>
                            <ContentPresenter VerticalAlignment="Center"/>
                        </StackPanel>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked"
                                    Value="True">
                                <Setter TargetName="checkMark"
                                        Property="Visibility"
                                        Value="Visible"/>
                                <Setter TargetName="checkBorder"
                                        Property="BorderBrush"
                                        Value="{StaticResource Accent}"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver"
                                    Value="True">
                                <Setter TargetName="checkBorder"
                                        Property="BorderBrush"
                                        Value="{StaticResource BorderHover}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ComboBox Style -->
        <Style x:Key="WidgetComboBox"
                TargetType="ComboBox">
            <Setter Property="Background"
                    Value="{StaticResource SurfaceElevated}"/>
            <Setter Property="Foreground"
                    Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush"
                    Value="{StaticResource Border}"/>
            <Setter Property="BorderThickness"
                    Value="1"/>
            <Setter Property="Padding"
                    Value="10,8"/>
            <Setter Property="FontSize"
                    Value="13"/>
        </Style>
    </Window.Resources>

    <!-- ═══════════════════════════════════════════════════════════════════════ -->
    <!-- Main Container with custom border                                        -->
    <!-- ═══════════════════════════════════════════════════════════════════════ -->
    <Border Background="{StaticResource WidgetBackground}"
            BorderBrush="{StaticResource Border}"
            BorderThickness="1"
            CornerRadius="12">

        <Border.Effect>
            <DropShadowEffect Color="Black"
                    BlurRadius="24"
                    ShadowDepth="4"
                    Opacity="0.4"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- ═══════════════════════════════════════════════════════════════ -->
            <!-- Title Bar                                                        -->
            <!-- ═══════════════════════════════════════════════════════════════ -->
            <Border Grid.Row="0"
                    Background="{StaticResource Surface}"
                    CornerRadius="12,12,0,0"
                    Padding="20,16"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <TextBlock Text="⚙ Clock Settings"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimary}"
                               VerticalAlignment="Center"/>
                    <Button Content="✕"
                            Style="{StaticResource WidgetButton}"
                            HorizontalAlignment="Right"
                            Width="28"
                            Height="28"
                            Padding="0"
                            FontSize="14"
                            Click="CancelButton_Click"/>
                </Grid>
            </Border>

            <!-- ═══════════════════════════════════════════════════════════════ -->
            <!-- Settings Panel                                                   -->
            <!-- ═══════════════════════════════════════════════════════════════ -->
            <ScrollViewer Grid.Row="1"
                          VerticalScrollBarVisibility="Auto"
                          Padding="20">
                <StackPanel>

                    <!-- Time Zone Section -->
                    <TextBlock Text="TIME ZONE"
                               FontSize="11"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextTertiary}"
                               Margin="0,0,0,8"/>

                    <ComboBox x:Name="TimeZoneComboBox"
                              Style="{StaticResource WidgetComboBox}"
                              ItemsSource="{Binding AvailableTimeZones}"
                              SelectedItem="{Binding SelectedTimeZone, Mode=TwoWay}"
                              DisplayMemberPath="DisplayName"
                              Height="38"
                              Margin="0,0,0,24"
                              SelectionChanged="TimeZoneComboBox_SelectionChanged"/>

                    <!-- Display Options Section -->
                    <TextBlock Text="DISPLAY OPTIONS"
                               FontSize="11"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextTertiary}"
                               Margin="0,0,0,12"/>

                    <CheckBox Content="Use 24-hour format"
                              Style="{StaticResource WidgetCheckBox}"
                              IsChecked="{Binding Use24HourFormat, Mode=TwoWay}"
                              Margin="0,0,0,12"
                              Checked="Format24Hour_Checked"
                              Unchecked="Format24Hour_Checked"/>

                    <CheckBox Content="Show seconds"
                              Style="{StaticResource WidgetCheckBox}"
                              IsChecked="{Binding ShowSeconds, Mode=TwoWay}"
                              Margin="0,0,0,12"
                              Checked="ShowSeconds_Checked"
                              Unchecked="ShowSeconds_Checked"/>

                    <CheckBox Content="Show time zone label"
                              Style="{StaticResource WidgetCheckBox}"
                              IsChecked="{Binding ShowTimeZoneLabel, Mode=TwoWay}"
                              Margin="0,0,0,24"
                              Checked="ShowTimeZone_Checked"
                              Unchecked="ShowTimeZone_Checked"/>

                    <!-- Preview Section -->
                    <TextBlock Text="PREVIEW"
                               FontSize="11"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextTertiary}"
                               Margin="0,0,0,12"/>

                    <Border Background="{StaticResource SurfaceElevated}"
                            BorderBrush="{StaticResource AccentGlow}"
                            BorderThickness="2"
                            CornerRadius="10"
                            Padding="24,16"
                            HorizontalAlignment="Stretch">

                        <Border.Effect>
                            <DropShadowEffect Color="#2DD4BF"
                                    BlurRadius="12"
                                    ShadowDepth="0"
                                    Opacity="0.15"/>
                        </Border.Effect>

                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock x:Name="PreviewTimeTextBlock"
                                       Text="--:--:--"
                                       FontFamily="Segoe UI Variable Display, Segoe UI"
                                       FontSize="36"
                                       FontWeight="Light"
                                       Foreground="{StaticResource TextPrimary}"
                                       HorizontalAlignment="Center"/>

                            <Border HorizontalAlignment="Center"
                                    Margin="0,8,0,0"
                                    Padding="8,3"
                                    CornerRadius="8"
                                    Background="{StaticResource AccentGlow}"
                                    Visibility="{Binding ShowTimeZoneLabel, Converter={StaticResource BoolToVisibility}, FallbackValue=Visible}">
                                <TextBlock x:Name="PreviewZoneTextBlock"
                                           Text=""
                                           FontSize="11"
                                           Foreground="{StaticResource Accent}"
                                           FontWeight="SemiBold"
                                           HorizontalAlignment="Center"/>
                            </Border>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- ═══════════════════════════════════════════════════════════════ -->
            <!-- Action Buttons                                                   -->
            <!-- ═══════════════════════════════════════════════════════════════ -->
            <Border Grid.Row="2"
                    Background="{StaticResource Surface}"
                    CornerRadius="0,0,12,12"
                    Padding="20,16">
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Right">

                    <Button Content="Cancel"
                            Style="{StaticResource WidgetButton}"
                            Click="CancelButton_Click"
                            Width="100"
                            Margin="0,0,12,0"/>

                    <Button Content="Save"
                            Style="{StaticResource PrimaryButton}"
                            Click="SaveButton_Click"
                            Width="100"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>
