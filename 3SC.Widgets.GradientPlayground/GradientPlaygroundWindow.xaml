<local:WidgetWindowBase x:Class="_3SC.Widgets.GradientPlayground.GradientPlaygroundWindow"
                        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                        xmlns:local="clr-namespace:_3SC.Widgets.GradientPlayground"
                        xmlns:helpers="clr-namespace:_3SC.Widgets.GradientPlayground.Helpers"
                        xmlns:models="clr-namespace:_3SC.Widgets.GradientPlayground.Models"
                        Title="Gradient Playground"
                        Width="420"
                        Height="540"
                        Background="Transparent">

    <local:WidgetWindowBase.Resources>
        <helpers:ColorToBrushConverter x:Key="ColorToBrushConverter"/>
        <helpers:ColorToHexConverter x:Key="ColorToHexConverter"/>
        <helpers:PercentageConverter x:Key="PercentageConverter"/>

        <!-- Enum to Bool Converter for RadioButtons -->
        <local:EnumToBoolConverter x:Key="EnumToBoolConverter"/>

        <!-- Action Button Style -->
        <Style x:Key="ActionButtonStyle"
                TargetType="Button">
            <Setter Property="Background"
                    Value="#3A3A3C"/>
            <Setter Property="Foreground"
                    Value="White"/>
            <Setter Property="BorderThickness"
                    Value="0"/>
            <Setter Property="Padding"
                    Value="12,6"/>
            <Setter Property="FontSize"
                    Value="12"/>
            <Setter Property="Cursor"
                    Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver"
                        Value="True">
                    <Setter Property="Background"
                            Value="#4A4A4C"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Preset Button Style -->
        <Style x:Key="PresetButtonStyle"
                TargetType="Button">
            <Setter Property="Background"
                    Value="#2C2C2E"/>
            <Setter Property="Foreground"
                    Value="White"/>
            <Setter Property="BorderThickness"
                    Value="1"/>
            <Setter Property="BorderBrush"
                    Value="#444"/>
            <Setter Property="Padding"
                    Value="8,4"/>
            <Setter Property="FontSize"
                    Value="10"/>
            <Setter Property="Margin"
                    Value="2"/>
            <Setter Property="Cursor"
                    Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver"
                        Value="True">
                    <Setter Property="Background"
                            Value="#3C3C3E"/>
                    <Setter Property="BorderBrush"
                            Value="#666"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </local:WidgetWindowBase.Resources>

    <Border Background="#1E1E1E"
            CornerRadius="12"
            BorderThickness="2">
        <Border.BorderBrush>
            <LinearGradientBrush StartPoint="0,0"
                    EndPoint="1,1">
                <GradientStop Color="#FF6B6B"
                        Offset="0"/>
                <GradientStop Color="#4ECDC4"
                        Offset="0.5"/>
                <GradientStop Color="#95E1D3"
                        Offset="1"/>
            </LinearGradientBrush>
        </Border.BorderBrush>

        <Grid Margin="15">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="180"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <TextBlock Grid.Row="0"
                       Text="ðŸŒˆ Gradient Playground"
                       FontSize="20"
                       FontWeight="Bold"
                       Foreground="White"
                       Margin="0,0,0,10"/>

            <!-- Gradient Preview -->
            <Border Grid.Row="1"
                    CornerRadius="8"
                    BorderThickness="2"
                    BorderBrush="#333"
                    Margin="0,0,0,10">
                <Rectangle Fill="{Binding PreviewBrush}"
                           RadiusX="6"
                           RadiusY="6"/>
            </Border>

            <!-- Controls -->
            <Grid Grid.Row="2"
                    Margin="0,0,0,10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Gradient Type -->
                <StackPanel Grid.Row="0"
                        Orientation="Horizontal"
                        Margin="0,0,0,8">
                    <TextBlock Text="Type:"
                               Foreground="#AAA"
                               VerticalAlignment="Center"
                               Width="60"/>
                    <RadioButton Content="Linear"
                                 IsChecked="{Binding GradientType, Converter={StaticResource EnumToBoolConverter}, ConverterParameter=Linear}"
                                 Foreground="White"
                                 Margin="0,0,15,0"/>
                    <RadioButton Content="Radial"
                                 IsChecked="{Binding GradientType, Converter={StaticResource EnumToBoolConverter}, ConverterParameter=Radial}"
                                 Foreground="White"/>
                </StackPanel>

                <!-- Angle (for Linear) -->
                <StackPanel Grid.Row="1"
                        Orientation="Horizontal"
                        Margin="0,0,0,8">
                    <TextBlock Text="Angle:"
                               Foreground="#AAA"
                               VerticalAlignment="Center"
                               Width="60"/>
                    <Slider Value="{Binding Angle}"
                            Minimum="0"
                            Maximum="360"
                            Width="200"
                            VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding Angle, StringFormat={}{0:F0}Â°}"
                               Foreground="White"
                               VerticalAlignment="Center"
                               Margin="10,0,0,0"/>
                </StackPanel>

                <!-- Action Buttons -->
                <StackPanel Grid.Row="2"
                        Orientation="Horizontal"
                        HorizontalAlignment="Center">
                    <Button Content="âž• Add Stop"
                            Command="{Binding AddColorStopCommand}"
                            Style="{StaticResource ActionButtonStyle}"
                            Margin="0,0,5,0"/>
                    <Button Content="ðŸŽ² Random"
                            Command="{Binding RandomizeColorsCommand}"
                            Style="{StaticResource ActionButtonStyle}"
                            Margin="5,0"/>
                    <Button Content="â†”ï¸ Reverse"
                            Command="{Binding ReverseGradientCommand}"
                            Style="{StaticResource ActionButtonStyle}"
                            Margin="5,0,0,0"/>
                </StackPanel>
            </Grid>

            <!-- Color Stops List -->
            <ScrollViewer Grid.Row="3"
                          VerticalScrollBarVisibility="Auto"
                          Margin="0,0,0,10">
                <ItemsControl ItemsSource="{Binding ColorStops}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Background="#2C2C2E"
                                    CornerRadius="6"
                                    Padding="8"
                                    Margin="0,0,0,5">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="30"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Color Preview -->
                                    <Border Grid.Column="0"
                                            Width="24"
                                            Height="24"
                                            CornerRadius="4"
                                            BorderThickness="1"
                                            BorderBrush="#555">
                                        <Border.Background>
                                            <SolidColorBrush Color="{Binding Color}"/>
                                        </Border.Background>
                                    </Border>

                                    <!-- Offset Slider -->
                                    <Slider Grid.Column="1"
                                            Value="{Binding Offset}"
                                            Minimum="0"
                                            Maximum="1"
                                            Margin="10,0"/>

                                    <!-- Offset Display -->
                                    <TextBlock Grid.Column="2"
                                               Text="{Binding Offset, Converter={StaticResource PercentageConverter}}"
                                               Foreground="#AAA"
                                               VerticalAlignment="Center"
                                               Margin="5,0,10,0"/>

                                    <!-- Remove Button -->
                                    <Button Grid.Column="3"
                                            Content="âœ•"
                                            Command="{Binding DataContext.RemoveColorStopCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                            CommandParameter="{Binding}"
                                            Background="#444"
                                            Foreground="#FF6B6B"
                                            BorderThickness="0"
                                            Width="24"
                                            Height="24"
                                            FontSize="14"
                                            Cursor="Hand"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>

            <!-- Export & Presets -->
            <Grid Grid.Row="4">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Presets -->
                <WrapPanel Grid.Row="0"
                        Margin="0,0,0,10">
                    <Button Content="Sunset"
                            Command="{Binding LoadPresetCommand}"
                            CommandParameter="Sunset"
                            Style="{StaticResource PresetButtonStyle}"/>
                    <Button Content="Ocean"
                            Command="{Binding LoadPresetCommand}"
                            CommandParameter="Ocean"
                            Style="{StaticResource PresetButtonStyle}"/>
                    <Button Content="Forest"
                            Command="{Binding LoadPresetCommand}"
                            CommandParameter="Forest"
                            Style="{StaticResource PresetButtonStyle}"/>
                    <Button Content="Fire"
                            Command="{Binding LoadPresetCommand}"
                            CommandParameter="Fire"
                            Style="{StaticResource PresetButtonStyle}"/>
                    <Button Content="Cotton Candy"
                            Command="{Binding LoadPresetCommand}"
                            CommandParameter="Cotton Candy"
                            Style="{StaticResource PresetButtonStyle}"/>
                    <Button Content="Aurora"
                            Command="{Binding LoadPresetCommand}"
                            CommandParameter="Aurora"
                            Style="{StaticResource PresetButtonStyle}"/>
                    <Button Content="Midnight"
                            Command="{Binding LoadPresetCommand}"
                            CommandParameter="Midnight"
                            Style="{StaticResource PresetButtonStyle}"/>
                    <Button Content="Peachy"
                            Command="{Binding LoadPresetCommand}"
                            CommandParameter="Peachy"
                            Style="{StaticResource PresetButtonStyle}"/>
                </WrapPanel>

                <!-- Export Buttons -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="0"
                            Content="ðŸ“‹ Copy CSS"
                            Command="{Binding CopyCssCommand}"
                            Background="#4CAF50"
                            Foreground="White"
                            Padding="10,8"
                            Margin="0,0,5,0"
                            BorderThickness="0"
                            FontWeight="Bold"
                            Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}"
                                                    CornerRadius="6">
                                                <ContentPresenter HorizontalAlignment="Center"
                                                                  VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver"
                                            Value="True">
                                        <Setter Property="Background"
                                                Value="#66BB6A"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <Button Grid.Column="1"
                            Content="ðŸ“‹ Copy SVG"
                            Command="{Binding CopySvgCommand}"
                            Background="#2196F3"
                            Foreground="White"
                            Padding="10,8"
                            Margin="5,0,0,0"
                            BorderThickness="0"
                            FontWeight="Bold"
                            Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}"
                                                    CornerRadius="6">
                                                <ContentPresenter HorizontalAlignment="Center"
                                                                  VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver"
                                            Value="True">
                                        <Setter Property="Background"
                                                Value="#42A5F5"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </Grid>
        </Grid>
    </Border>
</local:WidgetWindowBase>
